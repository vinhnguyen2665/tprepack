<script language="javascript" type="text/javascript">

var ponCfgObj = {};
var onuSnStack = {};
var onuSnList = {};
var curSn;
	
function doSave()
{
	curSn.onuId = $.id("new_mac").value;
	if (curSn.onuId.length == 0)
	{
		alert("Please input MAC address!");
		return;
	}
	
	if($.mac(curSn.onuId,false))
	{
		var element = $.id("new_mac");
		if(element)
		{
			element.focus();
			element.select();
		}
		return false;
	}
	
	$.act(ACT_SET, EPON_ONU_SN, onuSnStack, null, curSn);
	
	if (! $.exe())
	{
		curSn = $.act(ACT_GET, EPON_ONU_SN, onuSnStack, null);
		if (!$.exe())
		{
			$.id("cur_mac").value = curSn.onuId;
		}
		
		$.act(ACT_OP, ACT_OP_OAM_RESTART);
		$.exe();
		$.reload();
	}
}

function init()
{
	var snId;
	
	ponCfgObj = $.act(ACT_GET, PON_CFG, null, null);
	if (!$.exe())
	{
		snId = ponCfgObj.onuSnId;
	}

	onuSnList = $.act(ACT_GL, EPON_ONU_SN, null, null, null);
	if (!$.exe())
	{
		onuSnStack = onuSnList[snId].__stack;
	}
	
	curSn = $.act(ACT_GET, EPON_ONU_SN, onuSnStack, null);
	if (!$.exe())
	{
		$.id("cur_mac").value = curSn.onuId;
	}
}

</script>
<p class="et"><b>PON Certification</b></p>

<p class="bl"></p>
<div class="con1 M">
<p class="ct" id="gpon_sn_title_"><b>EPON MAC</b></p>
<p class="st T"><b id="pon_info_">EPON MAC</b></p>
<div class="con2">
<p class="L1"><b class="item M" id="cur_mac_">Old MAC:</b><input  class="text" size="17" maxlength="17" id="cur_mac" disabled /></p>
<p class="L1"><b class="item M" id="new_mac_">New MAC:</b><input  class="text" size="17" maxlength="17" id="new_mac" /></p>
<p class="br" />
<p class="center">
<input type="button" class="button L" value="Save" id="save" onclick="doSave();" /></p>

<p class="bl"></p>
</div>
</div>

<script language="javascript" type="text/javascript">
init();
</script>
	
	
	