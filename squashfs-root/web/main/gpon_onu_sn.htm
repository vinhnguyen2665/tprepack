<script language="javascript" type="text/javascript">

var onuSnStack = {};
var onuSnList = {};
var curSn;

function init()
{
	var ponCfgObj = {};
	var snId;
	
	ponCfgObj = $.act(ACT_GET, PON_CFG, null, null);
	if (!$.exe())
	{
		snId = ponCfgObj.onuSnId;
	}

	onuSnList = $.act(ACT_GL, GPON_ONU_SN, null, null, null);
	if (!$.exe())
	{
		onuSnStack = onuSnList[snId].__stack;
	}
	
	curSn = $.act(ACT_GET, GPON_ONU_SN, onuSnStack, null);
	if (!$.exe())
	{
		$.id("vendor_id").value = curSn.vendorId;
		$.id("sn").value = curSn.gponSn;
		$.id("soft_ver").value = curSn.softwareVersion;
		$.id("main_soft_ver").value = curSn.mainSwVer;
		$.id("standby_soft_ver").value = curSn.standbySwVer;
		$.id("omcc_ver").value = curSn.omccVersion;
		$.id("traff_mng_opt").value = curSn.traffMngOpt;
		$.id("cardholder_type").value = curSn.cardholderType;
		$.id("equipment_id").value = curSn.equipmentId;
	}
}

function doClick(obj)
{
	curSn.vendorId = $.id("vendor_id").value;
	curSn.gponSn = $.id("sn").value;
	curSn.softwareVersion = $.id("soft_ver").value;
	curSn.mainSwVer		  = $.id("main_soft_ver").value;
	curSn.standbySwVer	  = $.id("standby_soft_ver").value;
	curSn.omccVersion = $.id("omcc_ver").value;
	curSn.traffMngOpt = $.id("traff_mng_opt").value;
	curSn.cardholderType = $.id("cardholder_type").value;
	curSn.equipmentId = $.id("equipment_id").value;
	
	if(($.isnum($.id("cardholder_type").value) == false) || ($.id("cardholder_type").value == 0))
	{
		var element = $.id("cardholder_type");
		if(element)
		{
			element.focus();
			element.select();
		}
		alert("Please input decimal number[0 - 9]");
		return false;
	}
	
	var regExp = /^([a-f]|[A-F]|[0-9]){16}$/;
	if (!regExp.test(curSn.gponSn))
	{
		alert("The Serial Number must be 16 bytes hexadecimal number!");
		return;
	}
	
	if(confirm("Re-register to make the modification take effect. Continue?"))
	{
		$.act(ACT_SET, GPON_ONU_SN, onuSnStack, null, curSn);
		if (!$.exe())
		{
			curSn = $.act(ACT_GET, GPON_ONU_SN, onuSnStack, null);
			if (!$.exe())
			{
				$.id("vendor_id").value = curSn.vendorId;
				$.id("sn").value = curSn.gponSn;
				$.id("soft_ver").value = curSn.softwareVersion;
				$.id("main_soft_ver").value = curSn.mainSwVer;
				$.id("standby_soft_ver").value = curSn.standbySwVer;
				$.id("omcc_ver").value = curSn.omccVersion;
				$.id("traff_mng_opt").value = curSn.traffMngOpt;
				$.id("cardholder_type").value = curSn.cardholderType;
				$.id("equipment_id").value = curSn.equipmentId;
			}
			
			$.act(ACT_OP, ACT_OP_OMCI_RESTART);
			$.exe();
		}
	}
}

</script>

<div class="con1 M">
<p class="ct" id="manage_title_">Device information setting</p>
<p class="bl"></p>
<div class="con2">
<p class="br" />
<p><b class="item M" id="vendor_id_">Vendor ID: </b><input type="text" class="text" size="17" maxlength="4" id="vendor_id" /></p>
<p><b class="item M" id="sn_">Serial Number: </b><input type="text" class="text" size="17" maxlength="16" id="sn" /></p>
<p><b class="item M" id="soft_ver_">ONT version: </b><input type="text" class="text" size="17" maxlength="14" id="soft_ver" /></p>

<p><b class="item M" id="main_soft_ver_">Main software version: </b><input type="text" class="text" size="17" maxlength="16" id="main_soft_ver" /></p>
<p><b class="item M" id="standby_soft_ver_">Stanby software version: </b><input type="text" class="text" size="17" maxlength="16" id="standby_soft_ver" /></p>
<p><b class="item M" id="cardholder_type_">Card holder type: </b><input type="text" class="text" size="17" maxlength="1" id="cardholder_type" /></p>
<p><b class="item M" id="equipment_id_">Equipment ID:</b><input type="text" class="text" size="17" maxlength="20" id="equipment_id" /></p>

<p><b class="item M" id="omcc_ver_">OMCC version: </b>
<select id="omcc_ver">
	<option value="128">0x80</option>
	<option value="129">0x81</option>
	<option value="130">0x82</option>
	<option value="131">0x83</option>
	<option value="132">0x84</option>
	<option value="133">0x85</option>
	<option value="134">0x86</option>
	<option value="150">0x96</option>
	<option value="160">0xA0</option>
	<option value="161">0xA1</option>
	<option value="162">0xA2</option>
	<option value="163">0xA3</option>
	<option value="176">0xB0</option>
	<option value="177">0xB1</option>
	<option value="178">0xB2</option>
	<option value="179">0xB3</option>
</select></p>
<p><b class="item M" id="traff_mng_opt_">Traffic management options：</b>
<select id="traff_mng_opt">
	<option value="0">0</option>
	<option value="1">1</option>
	<option value="2">2</option>
</select></p>
</div>

<p class="tail" id="tail">
<input type="button" class="button L " value="Save" id="save" onclick="doClick(this);" /></p>
</div>

<script language="javascript" type="text/javascript">
init();
</script>
	
	
	